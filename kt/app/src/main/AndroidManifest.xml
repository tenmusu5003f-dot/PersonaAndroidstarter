<?xml version="1.0" encoding="utf-8"?>
<manifest xmlns:android="http://schemas.android.com/apk/res/android">

<application
    android:label="@string/app_name"
    android:icon="@mipmap/ic_launcher"
    android:theme="@style/Theme.Persona.Splash"
    android:networkSecurityConfig="@xml/network_security_config"
    android:usesCleartextTraffic="false">

    <activity
        android:name=".MainActivity"
        android:exported="true">
        <intent-filter>
            <action android:name="android.intent.action.MAIN"/>
            <category android:name="android.intent.category.LAUNCHER"/>
        </intent-filter>
    </activity>
</application>

    <!-- kt/app/src/main/AndroidManifest.xml の <application> 外 or 内に適宜追記 -->
<uses-permission android:name="android.permission.ACCESS_FINE_LOCATION"/>
<uses-permission android:name="android.permission.ACCESS_COARSE_LOCATION"/>
<!-- ネット送信（HTTPS） -->
<uses-permission android:name="android.permission.INTERNET"/>
<!-- 端末状態 & Bluetooth/有線の検出用（必要に応じて） -->
<uses-permission android:name="android.permission.BLUETOOTH_CONNECT" />
<uses-permission android:name="android.permission.MODIFY_AUDIO_SETTINGS"/>

    <!-- WorkManager のフォアグラウンド通知（無音・非表示同然）用チャネル -->
    <service
        android:name=".sos.SosForegroundService"
        android:exported="false"
        android:foregroundServiceType="dataSync"/>
</application>

    package com.example.persona

import android.os.Bundle
import android.view.View
import android.view.animation.AlphaAnimation
import androidx.activity.enableEdgeToEdge
import androidx.appcompat.app.AppCompatActivity
import androidx.core.splashscreen.SplashScreen.Companion.installSplashScreen
import com.example.persona.databinding.ActivityMainBinding

class MainActivity : AppCompatActivity() {
    private lateinit var binding: ActivityMainBinding

    override fun onCreate(savedInstanceState: Bundle?) {
        // Android 12+ の標準スプラッシュ
        installSplashScreen()
        super.onCreate(savedInstanceState)
        enableEdgeToEdge()

        binding = ActivityMainBinding.inflate(layoutInflater)
        setContentView(binding.root)

        // ささやかなオープニングフェード
        binding.root.apply {
            visibility = View.INVISIBLE
            post {
                visibility = View.VISIBLE
                startAnimation(AlphaAnimation(0f, 1f).apply { duration = 450 })
            }
        }

        binding.textView.text = "Hello Persona!"
    }
}

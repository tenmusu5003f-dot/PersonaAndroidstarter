// =====================================
// 🚀 Persona Android Starter - FastBoot Header
// =====================================

import android.content.Context
import kotlinx.coroutines.*
import android.util.Log

object FastBoot {
    private const val TAG = "FastBoot"

    suspend fun launch(ctx: Context): Boolean = coroutineScope {
        val start = System.currentTimeMillis()
        Log.i(TAG, "⚡ Boot sequence start")

        // 並列処理ブロック（すべて同時に起動）
        val results = awaitAll(
            async { SignatureGuard.verifySelf(ctx) },
            async { TamperGuard.checkBuildFlags() },
            async { RootGuard.quickScan(ctx) },
            async { CryptoVault.warmup(ctx) },
            async { AssetGuard.verifyHashes(ctx) },
            async { NetGuard.pinSetup(ctx) },
            async { Prewarm.warmTTS(ctx) },
        )

        val ok = results.all { it }
        val time = System.currentTimeMillis() - start
        Log.i(TAG, "⚙️ Boot complete: $ok ($time ms)")
        return@coroutineScope ok
    }
}

{
  "scripts/prologue.script": "deadbeef",
  "voices/aria.voice": "deadbeef"
}

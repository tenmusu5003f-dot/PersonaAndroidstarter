// =====================================
// ğŸš€ Persona Android Starter - FastBoot Header
// =====================================

import android.content.Context
import kotlinx.coroutines.*
import android.util.Log

object FastBoot {
    private const val TAG = "FastBoot"

    suspend fun launch(ctx: Context): Boolean = coroutineScope {
        val start = System.currentTimeMillis()
        Log.i(TAG, "âš¡ Boot sequence start")

        // ä¸¦åˆ—å‡¦ç†ãƒ–ãƒ­ãƒƒã‚¯ï¼ˆã™ã¹ã¦åŒæ™‚ã«èµ·å‹•ï¼‰
        val results = awaitAll(
            async { SignatureGuard.verifySelf(ctx) },
            async { TamperGuard.checkBuildFlags() },
            async { RootGuard.quickScan(ctx) },
            async { CryptoVault.warmup(ctx) },
            async { AssetGuard.verifyHashes(ctx) },
            async { NetGuard.pinSetup(ctx) },
            async { Prewarm.warmTTS(ctx) },
        )

        val ok = results.all { it }
        val time = System.currentTimeMillis() - start
        Log.i(TAG, "âš™ï¸ Boot complete: $ok ($time ms)")
        return@coroutineScope ok
    }
}

{
  "scripts/prologue.script": "deadbeef",
  "voices/aria.voice": "deadbeef"
}
